<div class="popup-container">
  <div class="popup-content">
    <h2>Tạo bảng</h2>

    <!-- Ảnh preview -->
    <div
      class="preview"
      [ngStyle]="{
        'background': selectedBackground?.startsWith('http')
          ? 'url(' + selectedBackground + ') center/cover'
          : selectedBackground
      }">
    </div>

    <!-- Chọn nền -->
    <div class="section">
      <label>Phông nền</label>

      <!-- Hiển thị sẵn 4 ảnh nền nhanh -->
      <div class="background-options">
        <img
          *ngFor="let bg of backgrounds"
          [src]="bg"
          (click)="selectBackground(bg)"
          [class.selected]="selectedBackground === bg">
      </div>

      <!-- Hàng màu gradient + dấu ... -->
      <div class="gradient-options">
        <div
          *ngFor="let bg of gradientBackgrounds"
          class="gradient-tile"
          [ngStyle]="{'background': bg}"
          (click)="selectBackground(bg)"
          [class.selected]="selectedBackground === bg">
        </div>

        <!-- Dấu ... mở thêm nền -->
        <div class="gradient-tile more-tile" (click)="togglePicker()">...</div>
      </div>

      <!-- Popup chọn nền nâng cao -->
      <app-background-picker
        *ngIf="showPicker"
        (selectBackground)="onBackgroundSelected($event)"
        (close)="togglePicker()">
      </app-background-picker>
    </div>

    <!-- Tiêu đề bảng -->
    <div class="section">
      <label>Tiêu đề bảng <span class="required">*</span></label>
      <input
        type="text"
        [(ngModel)]="boardTitle"
        placeholder="Nhập tiêu đề bảng..."
        required
        #titleInput="ngModel"
      />
      <!-- Hiển thị lỗi nếu trống -->
      <div class="error" *ngIf="titleInput.invalid && titleInput.touched">
        Vui lòng nhập tiêu đề bảng.
      </div>
    </div>


    <!-- Quyền xem -->
    <div class="section">
      <label>Quyền xem</label>
      <select>
        <option>Không gian làm việc</option>
        <option>Riêng tư</option>
      </select>
    </div>

    <!-- Nút hành động -->
    <div class="actions">
      <button class="create-btn" (click)="onCreateBoard()">Tạo mới</button>
      <button class="template-btn" (click)="close.emit()">Bắt đầu với Mẫu</button>
    </div>
  </div>
</div>
